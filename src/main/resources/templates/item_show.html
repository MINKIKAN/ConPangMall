<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <div th:replace="fragments/header :: header"/>
    <link rel="stylesheet" href="/css/item_show.css">
    <script src="https://code.jquery.com/jquery-3.6.4.js" integrity="sha256-a9jBBRygX1Bh5lt8GZjXDzyOB+bWve9EiO7tROUtj/E=" crossorigin="anonymous"></script>
</head>

<body id="page-top">

<!-- Page Wrapper -->
<div id="wrapper">

    <!-- 왼쪽 사이드 바 시작 -->
    <!-- th:replace로 templates안에 fragments 폴더안에 side_bar.html 받아오게 함 -->
    <!-- 수정할 내용은 side_bar.html 에서 해주시면 다 적용됩니다 -->
    <ul class="navbar-nav bg-gradient-primary sidebar sidebar-dark accordion" id="accordionSidebar">

        <div th:replace="fragments/side_bar :: side_bar"/>

    </ul>
    <!-- 왼쪽 사이드 바 끝 -->

    <!-- Content Wrapper -->
    <div id="content-wrapper" class="d-flex flex-column">

        <!-- Main Content -->
        <div id="content">

            <!-- 상단의 nav 바 시작 -->
            <!-- 이것도 수정하실거 있으시면 fragments 폭더에 nav_bar 수정해주시면 됩니다 -->
            <nav class="navbar navbar-expand navbar-light bg-white topbar mb-4 static-top shadow">
                <div th:replace="fragments/nav_bar :: nav_bar"/>
            </nav>
            <!-- 상단의 nav 바 끝 -->

            <!-- 바디 부분 시작 -->
            <div class="container-fluid">
                <div class="right_contents hover_box" id="goods_list">

                    <div class="boxed-list-wrapper">

                        <ul class="items_list">
                            <li class="items_box" th:each="item : ${itemList}">
                                <div class="img_box" id="dataTable">
                                    <a class="img-block" th:href="@{/item/info/{id}(id=${item.id})}">
                                        <img class="lazyload lazy" th:src="${item.image}" style="display: block;">
                                    </a>
                                </div>
                                <div class="item_name">
                                    <p class="item_txt01"><a th:href="@{/item/info/{id}(id=${item.id})}"
                                                             th:text="${item.name}"></a></p>
                                    <p class="item_txt02">부가설명</p>
                                </div>
                                <div class="item_price">
                                    <p class="price" th:text="${item.price}"></p>
                                    원
                                </div>
                            </li>
                        </ul>
                        <script>
                            // 페이지당 아이템 수를 정의합니다
                            const ITEMS_PER_PAGE = 2;

                            // 아이템 목록 요소를 가져옵니다
                            const itemList = document.querySelector('.items_box');

                            // 페이징 요소를 가져옵니다
                            const pagination = document.querySelector('.pagination');

                            // 총 아이템 수를 가져옵니다
                            const itemsList = document.querySelector(".items_list");
                            const totalItems = itemsList.children.length;

                            // 전체 페이지 수를 계산합니다
                            const totalPages = Math.ceil(totalItems / ITEMS_PER_PAGE);

                            // 현재 페이지를 첫 페이지로 초기화합니다
                            let currentPage = 1;

                            // 현재 페이지의 아이템을 표시합니다
                            displayItems(currentPage);

                            // 페이징 링크를 생성합니다
                            createPaginationLinks(totalPages);

                            function displayItems(page) {
                                // 표시할 아이템의 시작 및 끝 인덱스를 계산합니다
                                const startIndex = (page - 1) * ITEMS_PER_PAGE;
                                const endIndex = startIndex + ITEMS_PER_PAGE;

                                // 모든 아이템을 숨깁니다
                                const items = itemList.children;
                                for (let i = 0; i < items.length; i++) {
                                    items[i].style.display = 'none';
                                }

                                // 현재 페이지의 아이템을 표시합니다
                                for (let i = startIndex; i < endIndex && i < totalItems; i++) {
                                    items[i].style.display = 'block';
                                }
                            }

                            function createPaginationLinks(totalPages) {
                                // 이전 링크를 생성합니다
                                const prevLink = document.createElement('a');
                                prevLink.classList.add('prev');
                                prevLink.innerHTML = '이전';

                                // 이전 링크를 클릭하면 이전 페이지를 표시합니다
                                prevLink.addEventListener('click', () => {
                                    if (currentPage > 1) {
                                        currentPage--;
                                        displayItems(currentPage);
                                    }
                                });

                                // 다음 링크를 생성합니다
                                const nextLink = document.createElement('a');
                                nextLink.classList.add('next');
                                nextLink.innerHTML = '다음';

                                // 다음 링크를 클릭하면 다음 페이지를 표시합니다
                                nextLink.addEventListener('click', () => {
                                    if (currentPage < totalPages) {
                                        currentPage++;
                                        displayItems(currentPage);
                                    }
                                });

                                // 페이지 링크를 생성합니다
                                const pageLinks = document.createElement('div');
                                pageLinks.classList.add('page-links');

                                for (let i = 1; i <= totalPages; i++) {
                                    const pageLink = document.createElement('a');
                                    pageLink.innerHTML = i;

                                    // 현재 페이지를 나타내는 링크에는 active 클래스를 추가합니다
                                    if (i === currentPage) {
                                        pageLink.classList.add('active');
                                    }
                                    ;

                                    // 페이지 링크를 클릭하면 해당 페이지를 표시
                                };

                            };
                            let currentPage = 1;

                            function getTotalPages() {
                                return Math.ceil(totalItems / itemsPerPage);
                            }
                            function renderPageNumbers() {
                                const totalPages = getTotalPages();
                                let pageNumbersHTML = '';

                                for (let i = 1; i <= totalPages; i++) {
                                    const activeClass = i === currentPage ? 'active' : '';
                                    pageNumbersHTML += `<span class="page-number ${activeClass}">${i}</span>`;
                                }

                                document.querySelector('#pageNumbers').innerHTML = pageNumbersHTML;
                            }

                        </script>
                        <div class="pagination">
                            <button id="prevPage"><i class="fas fa-arrow-left"></i></button>
                            <div class="pagination">
                                <a href="#">&laquo;</a>
                                <a href="#">1</a>
                                <a href="#">2</a>
                                <a href="#">3</a>
                                <a href="#">4</a>
                                <a href="#">5</a>
                                <a href="#">&raquo;</a>
                            </div>
                            <button id="nextPage"><i class="fas fa-arrow-right"></i></button>
                        </div>

                    </div>
                </div>

            </div>
            <!-- 바디 부분 끝 -->

        </div>
        <div class="admin-add-btn">
            <button th:if="${#session != null and #session.getAttribute('id') == 'admin'}" onclick="location.href='/admin/item_add'">추가</button>
        </div>
        <!-- Footer -->
        <footer class="sticky-footer bg-white">
            <div class="container my-auto">
                <div class="copyright text-center my-auto">
                    <span>Copyright &copy; Your Website 2021</span>
                </div>
            </div>
        </footer>
        <!-- End of Footer -->

    </div>
    <!-- End of Content Wrapper -->

    </ul>
</div>



<!-- End of Page Wrapper -->

<!-- Scroll to Top Button-->
<a class="scroll-to-top rounded" href="#page-top">
    <i class="fas fa-angle-up"></i>
</a>

<!-- Logout Modal-->
<div class="modal fade" id="logoutModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
     aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Ready to Leave?</h5>
                <button class="close" type="button" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span>
                </button>
            </div>
            <div class="modal-body">Select "Logout" below if you are ready to end your current session.</div>
            <div class="modal-footer">
                <button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>
                <a class="btn btn-primary" href="login.html">Logout</a>
            </div>
        </div>
    </div>
</div>


<!-- Bootstrap core JavaScript-->
<script src="/vendor/jquery/jquery.min.js"></script>
<script src="/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

<!-- Custom scripts for all pages-->
<script src="/js/sb-admin-2.min.js"></script>

<!-- Page level plugins -->
<script src="/vendor/chart.js/Chart.min.js"></script>

<!-- Page level custom scripts -->
<script src="/js/demo/chart-area-demo.js"></script>
<script src="/js/demo/chart-pie-demo.js"></script>

</body>

</html>